<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="spj.entity.LraSkpdMapper">
    
    <select id="getTanggalPosting" parameterType="java.util.Map" resultType="java.lang.String">
        select max(d_posting) as tanggal
        from TIBUKUBESARSKPD
        where i_idbas = #{kodeAkun}
        and i_idskpd = #{idskpd}
         
    </select>
    
    <select id="getTanggalPostingMap" parameterType="java.util.Map" resultType="java.util.Map">
        select max(d_posting) as tglPosting
        from TIBUKUBESARSKPD
        where i_idbas = #{kodeAkun}
        and i_idskpd = #{idskpd}
         
    </select>
    
    <insert id="insertLraSkpd" statementType="CALLABLE" parameterType="spp.model.LRA"> 
        <!--
        {CALL proc_jour_lra_perskpd (#{tahun},#{idskpd},#{kodeskpd},#{namaskpd},#{tglPostingAwal},#{tglPosting},#{idEntry})}
        -->
        {CALL proc_tiskpdlra_perskpd (#{tahun},#{perubahan},#{bulan},#{idskpd},#{idEntry})}
    </insert>
    
    <select id="getnilaiparam"   parameterType="java.util.Map" resultType="java.util.Map">
        select N_DAERAH_JUDUL,N_DAERAH,I_PERDA_NO,C_PERDA_TAHUN,C_PERDA_TGL,N_KOTA,E_PERATURAN_SPD1,
        E_PERATURAN_SPD2,E_PERATURAN_SPD3,E_PERATURAN_SPD4,E_PERATURAN_SPD5
        from   TRDOKREFF  where i_id = '1'
    </select>
    
    <insert id="insertLraProvinsi" statementType="CALLABLE" parameterType="spp.model.LRA"> 
        {CALL proc_tiskpdlra (#{tahun},#{perubahan},#{bulan},#{idEntry})}
    </insert>
    
    <select id="getKodeStatus" parameterType="java.util.Map" resultType="java.lang.String">
        select distinct c_status as kodestatus
        from tiskpdlra where i_idskpd = #{idskpd}
        and d_posting = #{tanggal}
    </select>
    
    <select id="getKodeStatusProvinsi" parameterType="java.util.Map" resultType="java.lang.String">
        select distinct c_status as kodestatus
        from tiskpdlra where d_posting = #{tanggal}
    </select>
    
</mapper>